os: linux
dist: focal

services:
- docker

jobs:
  include:
  - stage: build docker image
    script:
    - docker build -t $DOCKER_USERNAME/spinkub-demo-v2 .
  - stage: push image to docker hub
    script:
    - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
    - docker push $DOCKER_USERNAME/spinkub-demo-v2 --all-tags
